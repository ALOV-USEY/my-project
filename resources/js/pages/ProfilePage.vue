<template>
  <div class="profile-container">
    <!-- –®–∞–ø–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è -->
    <section class="profile-header">
      <div class="profile-avatar">
        <img src="/images/avatar-placeholder.jpg" alt="–ê–≤–∞—Ç–∞—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è" />
      </div>
      <div class="profile-info">
        <h1>–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤</h1>
        <p class="profile-email">user@example.com</p>
        <p class="profile-joined">–ù–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ —Å —è–Ω–≤–∞—Ä—è 2025</p>
      </div>
      <button class="edit-profile-btn">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</button>
    </section>
    
    <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
    <section class="user-stats">
      <div class="stat-card">
        <div class="stat-value">12</div>
        <div class="stat-label">–ò–∑–±—Ä–∞–Ω–Ω—ã—Ö –∫—É—Ä—Å–æ–≤</div>
      </div>
      <div class="stat-card">
        <div class="stat-value">5</div>
        <div class="stat-label">–ó–∞–ø–∏—Å–∞–Ω–Ω—ã—Ö –∫—É—Ä—Å–æ–≤</div>
      </div>
      <div class="stat-card">
        <div class="stat-value">3</div>
        <div class="stat-label">–ó–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö –∫—É—Ä—Å–æ–≤</div>
      </div>
      <div class="stat-card">
        <div class="stat-value">4.8</div>
        <div class="stat-label">–°—Ä–µ–¥–Ω–∏–π —Ä–µ–π—Ç–∏–Ω–≥</div>
      </div>
    </section>
    
    <!-- –í–∫–ª–∞–¥–∫–∏ —Å –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º -->
    <section class="profile-tabs">
      <div class="tabs-header">
        <div 
          class="tab-item" 
          :class="{ 'active': activeTab === 'enrolled' }"
          @click="activeTab = 'enrolled'"
        >
          –ó–∞–ø–∏—Å–∞–Ω–Ω—ã–µ –∫—É—Ä—Å—ã
        </div>
        <div 
          class="tab-item" 
          :class="{ 'active': activeTab === 'favorites' }"
          @click="activeTab = 'favorites'"
        >
          –ò–∑–±—Ä–∞–Ω–Ω–æ–µ
        </div>
        <div 
          class="tab-item" 
          :class="{ 'active': activeTab === 'history' }"
          @click="activeTab = 'history'"
        >
          –ò—Å—Ç–æ—Ä–∏—è –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤
        </div>
        <div 
          class="tab-item" 
          :class="{ 'active': activeTab === 'settings' }"
          @click="activeTab = 'settings'"
        >
          –ù–∞—Å—Ç—Ä–æ–π–∫–∏
        </div>
      </div>
      
      <!-- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –≤–∫–ª–∞–¥–æ–∫ -->
      <div class="tabs-content">
        <!-- –ó–∞–ø–∏—Å–∞–Ω–Ω—ã–µ –∫—É—Ä—Å—ã -->
        <div v-if="activeTab === 'enrolled'" class="tab-content">
          <h2>–ó–∞–ø–∏—Å–∞–Ω–Ω—ã–µ –∫—É—Ä—Å—ã</h2>
          
          <div class="courses-grid">
            <div v-for="course in enrolledCourses" :key="course.id" class="course-card">
              <div class="course-image">
                <img :src="course.imageUrl || '/placeholder-course.jpg'" :alt="course.title" />
                <div class="course-platform">{{ course.platform }}</div>
                <div class="course-progress">
                  <div class="progress-bar" :style="{ width: `${course.progress}%` }"></div>
                </div>
              </div>
              <div class="course-info">
                <h3 class="course-title">{{ course.title }}</h3>
                <div class="course-meta">
                  <span class="course-rating">
                    <span class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span>
                    <span class="rating-value">{{ course.rating }}</span>
                  </span>
                  <span class="course-students">{{ formatStudentCount(course.studentCount) }} —Å—Ç—É–¥–µ–Ω—Ç–æ–≤</span>
                </div>
                <div class="course-category">{{ course.category }}</div>
                <div class="course-progress-info">
                  <span>–ü—Ä–æ–≥—Ä–µ—Å—Å: {{ course.progress }}%</span>
                  <span>{{ course.completedLessons }}/{{ course.totalLessons }} —É—Ä–æ–∫–æ–≤</span>
                </div>
              </div>
            </div>
          </div>
          
          <div v-if="enrolledCourses.length === 0" class="empty-state">
            <div class="empty-icon">üìö</div>
            <h3>–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∑–∞–ø–∏—Å–∞–Ω–Ω—ã—Ö –∫—É—Ä—Å–æ–≤</h3>
            <p>–ù–∞–π–¥–∏—Ç–µ –∏–Ω—Ç–µ—Ä–µ—Å—É—é—â–∏–µ –≤–∞—Å –∫—É—Ä—Å—ã –∏ –Ω–∞—á–Ω–∏—Ç–µ –æ–±—É—á–µ–Ω–∏–µ</p>
            <button class="browse-courses-btn" @click="browseCourses">–ù–∞–π—Ç–∏ –∫—É—Ä—Å—ã</button>
          </div>
        </div>
        
        <!-- –ò–∑–±—Ä–∞–Ω–Ω–æ–µ -->
        <div v-if="activeTab === 'favorites'" class="tab-content">
          <h2>–ò–∑–±—Ä–∞–Ω–Ω—ã–µ –∫—É—Ä—Å—ã</h2>
          
          <div class="courses-grid">
            <div v-for="course in favoriteCourses" :key="course.id" class="course-card">
              <div class="course-image">
                <img :src="course.imageUrl || '/placeholder-course.jpg'" :alt="course.title" />
                <div class="course-platform">{{ course.platform }}</div>
                <div class="favorite-badge">‚òÖ</div>
              </div>
              <div class="course-info">
                <h3 class="course-title">{{ course.title }}</h3>
                <div class="course-meta">
                  <span class="course-rating">
                    <span class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span>
                    <span class="rating-value">{{ course.rating }}</span>
                  </span>
                  <span class="course-students">{{ formatStudentCount(course.studentCount) }} —Å—Ç—É–¥–µ–Ω—Ç–æ–≤</span>
                </div>
                <div class="course-category">{{ course.category }}</div>
                <div class="course-price" :class="{ 'free': course.price === 0 }">
                  {{ course.price === 0 ? '–ë–µ—Å–ø–ª–∞—Ç–Ω–æ' : `${formatPrice(course.price)} ‚ÇΩ` }}
                </div>
                <button class="remove-favorite-btn" @click="removeFavorite(course.id)">
                  –£–¥–∞–ª–∏—Ç—å –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ
                </button>
              </div>
            </div>
          </div>
          
          <div v-if="favoriteCourses.length === 0" class="empty-state">
            <div class="empty-icon">‚ù§Ô∏è</div>
            <h3>–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö –∫—É—Ä—Å–æ–≤</h3>
            <p>–î–æ–±–∞–≤–ª—è–π—Ç–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ –∫—É—Ä—Å—ã –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ, —á—Ç–æ–±—ã –Ω–µ –ø–æ—Ç–µ—Ä—è—Ç—å –∏—Ö</p>
            <button class="browse-courses-btn" @click="browseCourses">–ù–∞–π—Ç–∏ –∫—É—Ä—Å—ã</button>
          </div>
        </div>
        
        <!-- –ò—Å—Ç–æ—Ä–∏—è –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ -->
        <div v-if="activeTab === 'history'" class="tab-content">
          <h2>–ò—Å—Ç–æ—Ä–∏—è –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤</h2>
          
          <div class="history-list">
            <div v-for="(course, index) in viewHistory" :key="index" class="history-item">
              <div class="history-image">
                <img :src="course.imageUrl || '/placeholder-course.jpg'" :alt="course.title" />
              </div>
              <div class="history-info">
                <h3>{{ course.title }}</h3>
                <div class="history-meta">
                  <span class="history-platform">{{ course.platform }}</span>
                  <span class="history-category">{{ course.category }}</span>
                </div>
                <div class="history-date">–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ: {{ course.viewedAt }}</div>
              </div>
              <div class="history-actions">
                <button class="view-course-btn" @click="viewCourse(course.id)">–û—Ç–∫—Ä—ã—Ç—å</button>
                <button class="add-favorite-btn" v-if="!course.isFavorite" @click="addToFavorites(course.id)">
                  –í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ
                </button>
              </div>
            </div>
          </div>
          
          <div v-if="viewHistory.length === 0" class="empty-state">
            <div class="empty-icon">üîç</div>
            <h3>–ò—Å—Ç–æ—Ä–∏—è –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ –ø—É—Å—Ç–∞</h3>
            <p>–ó–¥–µ—Å—å –±—É–¥—É—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–Ω—ã–µ –≤–∞–º–∏ –∫—É—Ä—Å—ã</p>
            <button class="browse-courses-btn" @click="browseCourses">–ù–∞–π—Ç–∏ –∫—É—Ä—Å—ã</button>
          </div>
        </div>
        
        <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è -->
        <div v-if="activeTab === 'settings'" class="tab-content">
          <h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è</h2>
          
          <div class="settings-form">
            <div class="form-section">
              <h3>–õ–∏—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
              
              <div class="form-group">
                <label for="name">–§–ò–û</label>
                <input type="text" id="name" v-model="userSettings.name" placeholder="–í–∞—à–µ –ø–æ–ª–Ω–æ–µ –∏–º—è">
              </div>
              
              <div class="form-group">
                <label for="email">Email</label>
                <input type="email" id="email" v-model="userSettings.email" placeholder="–≤–∞—à@email.com">
              </div>
              
              <div class="form-group">
                <label for="phone">–¢–µ–ª–µ—Ñ–æ–Ω</label>
                <input type="tel" id="phone" v-model="userSettings.phone" placeholder="+7 (XXX) XXX-XX-XX">
              </div>
            </div>
            
            <div class="form-section">
              <h3>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π</h3>
              
              <div class="checkbox-group">
                <input type="checkbox" id="email_notifications" v-model="userSettings.notifications.email">
                <label for="email_notifications">–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ email</label>
              </div>
              
              <div class="checkbox-group">
                <input type="checkbox" id="new_courses" v-model="userSettings.notifications.newCourses">
                <label for="new_courses">–ù–æ–≤—ã–µ –∫—É—Ä—Å—ã –ø–æ –∏–Ω—Ç–µ—Ä–µ—Å–∞–º</label>
              </div>
              
              <div class="checkbox-group">
                <input type="checkbox" id="discounts" v-model="userSettings.notifications.discounts">
                <label for="discounts">–°–∫–∏–¥–∫–∏ –∏ –∞–∫—Ü–∏–∏</label>
              </div>
              
              <div class="checkbox-group">
                <input type="checkbox" id="reminders" v-model="userSettings.notifications.reminders">
                <label for="reminders">–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –∫—É—Ä—Å–∞—Ö</label>
              </div>
            </div>
            
            <div class="form-section">
              <h3>–ü–∞—Ä–æ–ª—å</h3>
              
              <div class="form-group">
                <label for="current_password">–¢–µ–∫—É—â–∏–π –ø–∞—Ä–æ–ª—å</label>
                <input type="password" id="current_password" v-model="userSettings.currentPassword" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—É—â–∏–π –ø–∞—Ä–æ–ª—å">
              </div>
              
              <div class="form-group">
                <label for="new_password">–ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å</label>
                <input type="password" id="new_password" v-model="userSettings.newPassword" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å">
              </div>
              
              <div class="form-group">
                <label for="confirm_password">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è</label>
                <input type="password" id="confirm_password" v-model="userSettings.confirmPassword" placeholder="–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å">
              </div>
            </div>
            
            <div class="form-actions">
              <button class="save-settings-btn" @click="saveSettings">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è</button>
              <button class="cancel-btn" @click="resetSettings">–û—Ç–º–µ–Ω–∞</button>
            </div>
          </div>
        </div>
      </div>
    </section>
  </div>
</template>

<script>
import { ref, onMounted, reactive } from 'vue';
import { useRouter } from 'vue-router';

export default {
  name: 'ProfilePage',
  setup() {
    const router = useRouter();
    const activeTab = ref('enrolled');
    
    // –ú–æ–∫–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∑–∞–ø–∏—Å–∞–Ω–Ω—ã—Ö –∫—É—Ä—Å–æ–≤
    const enrolledCourses = ref([
      {
        id: 1,
        title: '–û—Å–Ω–æ–≤—ã –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ Python',
        platform: 'Stepik',
        category: '–ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ',
        rating: 4.8,
        studentCount: 154000,
        imageUrl: '/images/courses/python-basics.jpg',
        progress: 75,
        completedLessons: 15,
        totalLessons: 20
      },
      {
        id: 2,
        title: 'UX/UI –¥–∏–∑–∞–π–Ω: —Å –Ω—É–ª—è –¥–æ PRO',
        platform: 'Skillbox',
        category: '–î–∏–∑–∞–π–Ω',
        rating: 4.7,
        studentCount: 32500,
        imageUrl: '/images/courses/ux-ui-design.jpg',
        progress: 40,
        completedLessons: 8,
        totalLessons: 20
      },
      {
        id: 3,
        title: '–ê–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö –≤ Excel –∏ Power BI',
        platform: 'Coursera',
        category: '–ù–∞—É–∫–∞ –æ –¥–∞–Ω–Ω—ã—Ö',
        rating: 4.9,
        studentCount: 65800,
        imageUrl: '/images/courses/data-analysis.jpg',
        progress: 10,
        completedLessons: 2,
        totalLessons: 18
      }
    ]);
    
    // –ú–æ–∫–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö –∫—É—Ä—Å–æ–≤
    const favoriteCourses = ref([
      {
        id: 4,
        title: 'React –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö: –ø–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ',
        platform: 'Udemy',
        category: '–ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ',
        price: 3500,
        rating: 4.7,
        studentCount: 1200,
        imageUrl: '/images/courses/react-beginners.jpg'
      },
      {
        id: 5,
        title: '–§–∏–Ω–∞–Ω—Å–æ–≤–∞—è –≥—Ä–∞–º–æ—Ç–Ω–æ—Å—Ç—å –¥–ª—è –≤—Å–µ—Ö',
        platform: '–ù–µ—Ç–æ–ª–æ–≥–∏—è',
        category: '–ë–∏–∑–Ω–µ—Å',
        price: 0,
        rating: 4.5,
        studentCount: 3500,
        imageUrl: '/images/courses/finance.jpg'
      },
      {
        id: 6,
        title: '–ü—Ä–æ–º—ã—à–ª–µ–Ω–Ω—ã–π –¥–∏–∑–∞–π–Ω –æ—Ç –ê –¥–æ –Ø',
        platform: 'Skillbox',
        category: '–î–∏–∑–∞–π–Ω',
        price: 56000,
        rating: 4.8,
        studentCount: 750,
        imageUrl: '/images/courses/industrial-design.jpg'
      },
      {
        id: 7,
        title: '–ê–Ω–≥–ª–∏–π—Å–∫–∏–π –¥–ª—è IT-—Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤',
        platform: 'Stepik',
        category: '–ò–Ω–æ—Å—Ç—Ä–∞–Ω–Ω—ã–µ —è–∑—ã–∫–∏',
        price: 9900,
        rating: 4.6,
        studentCount: 2100,
        imageUrl: '/images/courses/english-it.jpg'
      }
    ]);
    
    // –ú–æ–∫–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤
    const viewHistory = ref([
      {
        id: 8,
        title: '–ú–∞—Å—Ç–µ—Ä-–∫–ª–∞—Å—Å –ø–æ digital-–º–∞—Ä–∫–µ—Ç–∏–Ω–≥—É',
        platform: '–ù–µ—Ç–æ–ª–æ–≥–∏—è',
        category: '–ú–∞—Ä–∫–µ—Ç–∏–Ω–≥',
        imageUrl: '/images/courses/digital-marketing.jpg',
        viewedAt: '20 –º–∞—è 2025, 10:15',
        isFavorite: false
      },
      {
        id: 7,
        title: '–ê–Ω–≥–ª–∏–π—Å–∫–∏–π –¥–ª—è IT-—Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤',
        platform: 'Stepik',
        category: '–ò–Ω–æ—Å—Ç—Ä–∞–Ω–Ω—ã–µ —è–∑—ã–∫–∏',
        imageUrl: '/images/courses/english-it.jpg',
        viewedAt: '19 –º–∞—è 2025, 18:30',
        isFavorite: true
      },
      {
        id: 9,
        title: '–û—Å–Ω–æ–≤—ã JavaScript –∏ –≤–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏',
        platform: 'GeekBrains',
        category: '–ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ',
        imageUrl: '/images/courses/javascript-basics.jpg',
        viewedAt: '18 –º–∞—è 2025, 14:20',
        isFavorite: false
      },
      {
        id: 10,
        title: '–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö',
        platform: 'Udemy',
        category: '–ò—Å–∫—É—Å—Å—Ç–≤–æ',
        imageUrl: '/images/courses/photography.jpg',
        viewedAt: '15 –º–∞—è 2025, 20:45',
        isFavorite: false
      }
    ]);
    
    // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    const userSettings = reactive({
      name: '–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤',
      email: 'user@example.com',
      phone: '+7 (999) 123-45-67',
      notifications: {
        email: true,
        newCourses: true,
        discounts: true,
        reminders: false
      },
      currentPassword: '',
      newPassword: '',
      confirmPassword: ''
    });
    
    // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ö–æ–¥–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–∏ –æ—Ç–º–µ–Ω—ã
    const originalSettings = { 
      name: userSettings.name,
      email: userSettings.email,
      phone: userSettings.phone,
      notifications: { ...userSettings.notifications }
    };
    
    // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏
    const formatStudentCount = (count) => {
      if (count >= 1000000) {
        return (count / 1000000).toFixed(1) + 'M';
      } else if (count >= 1000) {
        return (count / 1000).toFixed(1) + 'K';
      }
      return count;
    };
    
    const formatPrice = (price) => {
      return new Intl.NumberFormat('ru-RU').format(price);
    };
    
    // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏–∑–±—Ä–∞–Ω–Ω—ã–º
    const removeFavorite = (courseId) => {
      favoriteCourses.value = favoriteCourses.value.filter(course => course.id !== courseId);
      console.log(`–ö—É—Ä—Å ${courseId} —É–¥–∞–ª–µ–Ω –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ`);
    };
    
    const addToFavorites = (courseId) => {
      const courseToAdd = viewHistory.value.find(course => course.id === courseId);
      if (courseToAdd) {
        courseToAdd.isFavorite = true;
        console.log(`–ö—É—Ä—Å ${courseId} –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ`);
        // –ó–¥–µ—Å—å –ª–æ–≥–∏–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ
      }
    };
    
    // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
    const viewCourse = (courseId) => {
      console.log(`–ü–µ—Ä–µ—Ö–æ–¥ –∫ –∫—É—Ä—Å—É ${courseId}`);
      // router.push(`/courses/${courseId}`);
    };
    
    const browseCourses = () => {
      console.log('–ü–µ—Ä–µ—Ö–æ–¥ –∫ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ø–æ–∏—Å–∫–∞ –∫—É—Ä—Å–æ–≤');
      router.push('/');
    };
    
    // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø—Ä–æ—Ñ–∏–ª—è
    const saveSettings = () => {
      // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ä–æ–ª–µ–π
      if (userSettings.newPassword && 
          userSettings.newPassword !== userSettings.confirmPassword) {
        alert('–ü–∞—Ä–æ–ª–∏ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç');
        return;
      }
      
      console.log('–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã', userSettings);
      alert('–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã');
      
      // –°–±—Ä–æ—Å –ø–æ–ª–µ–π –ø–∞—Ä–æ–ª—è
      userSettings.currentPassword = '';
      userSettings.newPassword = '';
      userSettings.confirmPassword = '';
      
      // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
      originalSettings.name = userSettings.name;
      originalSettings.email = userSettings.email;
      originalSettings.phone = userSettings.phone;
      originalSettings.notifications = { ...userSettings.notifications };
    };
    
    const resetSettings = () => {
      // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∏–∑ –æ—Ä–∏–≥–∏–Ω–∞–ª–∞
      userSettings.name = originalSettings.name;
      userSettings.email = originalSettings.email;
      userSettings.phone = originalSettings.phone;
      userSettings.notifications = { ...originalSettings.notifications };
      
      // –°–±—Ä–æ—Å –ø–æ–ª–µ–π –ø–∞—Ä–æ–ª—è
      userSettings.currentPassword = '';
      userSettings.newPassword = '';
      userSettings.confirmPassword = '';
      
      console.log('–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–±—Ä–æ—à–µ–Ω—ã');
    };
    
    onMounted(() => {
      console.log('ProfilePage mounted');
      // –ó–¥–µ—Å—å –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –º–æ–∂–Ω–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    });
    
    return {
      activeTab,
      enrolledCourses,
      favoriteCourses,
      viewHistory,
      userSettings,
      formatStudentCount,
      formatPrice,
      removeFavorite,
      addToFavorites,
      viewCourse,
      browseCourses,
      saveSettings,
      resetSettings
    };
  }
};
</script>

<style lang="scss" scoped>
.profile-container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 20px;
}

.profile-header {
  display: flex;
  align-items: center;
  padding: 30px 0;
  border-bottom: 1px solid #e5e7eb;
  margin-bottom: 30px;
  
  .profile-avatar {
    width: 120px;
    height: 120px;
    border-radius: 50%;
    overflow: hidden;
    margin-right: 30px;
    border: 4px solid #3b82f6;
    
    img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
  }
  
  .profile-info {
    flex: 1;
    
    h1 {
      font-size: 28px;
      margin-bottom: 5px;
      color: #1f2937;
    }
    
    .profile-email {
      font-size: 16px;
      color: #6b7280;
      margin-bottom: 8px;
    }
    
    .profile-joined {
      font-size: 14px;
      color: #9ca3af;
    }
  }
  
  .edit-profile-btn {
    padding: 10px 20px;
    background: transparent;
    color: #3b82f6;
    border: 1px solid #3b82f6;
    border-radius: 6px;
    font-size: 14px;
    cursor: pointer;
    transition: all 0.3s;
    
    &:hover {
      background: #3b82f6;
      color: white;
    }
  }
}

.user-stats {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 20px;
  margin-bottom: 40px;
  
  .stat-card {
    padding: 20px;
    background: #f9fafb;
    border-radius: 8px;
    text-align: center;
    border: 1px solid #e5e7eb;
    
    .stat-value {
      font-size: 24px;
      font-weight: 700;
      color: #2563eb;
      margin-bottom: 8px;
    }
    
    .stat-label {
      font-size: 14px;
      color: #4b5563;
    }
  }
}

.profile-tabs {
  margin-bottom: 60px;
  
  .tabs-header {
    display: flex;
    border-bottom: 1px solid #e5e7eb;
    margin-bottom: 30px;
    
    .tab-item {
      padding: 15px 25px;
      font-size: 16px;
      color: #6b7280;
      cursor: pointer;
      transition: all 0.3s;
      
      &:hover {
        color: #2563eb;
      }
      
      &.active {
        color: #2563eb;
        font-weight: 500;
        border-bottom: 2px solid #2563eb;
      }
    }
  }
  
  .tab-content {
    h2 {
      font-size: 22px;
      color: #1f2937;
      margin-bottom: 25px;
    }
  }
}

.courses-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
  gap: 25px;
  
  .course-card {
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.08);
    overflow: hidden;
    transition: transform 0.3s, box-shadow 0.3s;
    cursor: pointer;
    
    &:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
    }
    
    .course-image {
      position: relative;
      height: 160px;
      overflow: hidden;
      
      img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }
      
      .course-platform {
        position: absolute;
        top: 10px;
        left: 10px;
        background: rgba(0, 0, 0, 0.6);
        color: white;
        padding: 4px 8px;
        font-size: 12px;
        border-radius: 4px;
      }
      
      .favorite-badge {
        position: absolute;
        top: 10px;
        right: 10px;
        background: #f59e0b;
        color: white;
        padding: 4px 8px;
        font-size: 14px;
        border-radius: 4px;
      }
      
      .course-progress {
        position: absolute;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 6px;
        background: rgba(0, 0, 0, 0.3);
        
        .progress-bar {
          height: 100%;
          background: #10b981;
        }
      }
    }
    
    .course-info {
      padding: 15px;
      
      .course-title {
        font-size: 16px;
        font-weight: 600;
        margin-bottom: 10px;
        color: #1f2937;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
        height: 44px;
      }
      
      .course-meta {
        display: flex;
        justify-content: space-between;
        margin-bottom: 8px;
        font-size: 14px;
        
        .course-rating {
          display: flex;
          align-items: center;
          
          .stars {
            color: #f59e0b;
            margin-right: 5px;
          }
          
          .rating-value {
            color: #4b5563;
          }
        }
        
        .course-students {
          color: #6b7280;
        }
      }
      
      .course-category {
        color: #4b5563;
        font-size: 14px;
        margin-bottom: 8px;
      }
      
      .course-price {
        font-weight: 600;
        font-size: 16px;
        color: #111827;
        margin-bottom: 12px;
        
        &.free {
          color: #059669;
        }
      }
      
      .course-progress-info {
        display: flex;
        justify-content: space-between;
        font-size: 14px;
        color: #6b7280;
        margin-top: 12px;
      }
      
      .remove-favorite-btn {
        margin-top: 10px;
        width: 100%;
        padding: 8px;
        background: transparent;
        border: 1px solid #ef4444;
        color: #ef4444;
        border-radius: 4px;
        font-size: 14px;
        cursor: pointer;
        transition: all 0.3s;
        
        &:hover {
          background: #ef4444;
          color: white;
        }
      }
    }
  }
}

.history-list {
  display: flex;
  flex-direction: column;
  gap: 15px;
  
  .history-item {
    display: flex;
    background: #f9fafb;
    border-radius: 8px;
    overflow: hidden;
    border: 1px solid #e5e7eb;
    
    .history-image {
      width: 100px;
      height: 100px;
      
      img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }
    }
    
    .history-info {
      flex: 1;
      padding: 15px;
      
      h3 {
        font-size: 16px;
        font-weight: 600;
        margin-bottom: 8px;
        color: #1f2937;
      }
      
      .history-meta {
        display: flex;
        gap: 15px;
        font-size: 14px;
        margin-bottom: 8px;
        
        .history-platform {
          color: #4b5563;
        }
        
        .history-category {
          color: #6b7280;
        }
      }
      
      .history-date {
        font-size: 14px;
        color: #9ca3af;
      }
    }
    
    .history-actions {
      display: flex;
      flex